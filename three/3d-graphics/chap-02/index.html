<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Three.js 장면 구성 요소 | ZZIC ZZIC</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/img/logo.png">
    <meta name="description" content="Three.js 장면 구성 요소">
    <meta property="og:title" content="Three.js 장면 구성 요소">
    <meta property="og:description" content="Three.js 장면 구성 요소">
    <meta property="og:url" content="https://zzic-zzic.github.io/blog/three/3d-graphics/chap-02/">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="google-site-verification" content="n9YufvdIskY_43ONwJe0Iz7yOPP29kk3AuR1digdzE4">
    
    <link rel="preload" href="/blog/assets/css/0.styles.6556d3aa.css" as="style"><link rel="preload" href="/blog/assets/js/app.c8d2d506.js" as="script"><link rel="preload" href="/blog/assets/js/4.80e5586c.js" as="script"><link rel="preload" href="/blog/assets/js/3.4f0179f1.js" as="script"><link rel="preload" href="/blog/assets/js/50.619225f8.js" as="script"><link rel="preload" href="/blog/assets/js/24.d6f88625.js" as="script"><link rel="preload" href="/blog/assets/js/36.d787fa02.js" as="script"><link rel="preload" href="/blog/assets/js/42.1feea272.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.ca2e81f8.js"><link rel="prefetch" href="/blog/assets/js/10.5c5fe8a2.js"><link rel="prefetch" href="/blog/assets/js/13.094bc96b.js"><link rel="prefetch" href="/blog/assets/js/14.6fa28f72.js"><link rel="prefetch" href="/blog/assets/js/15.0a1cdb8f.js"><link rel="prefetch" href="/blog/assets/js/16.cf27ba1b.js"><link rel="prefetch" href="/blog/assets/js/17.41c06d9f.js"><link rel="prefetch" href="/blog/assets/js/18.b9c0bcca.js"><link rel="prefetch" href="/blog/assets/js/19.d1fcc810.js"><link rel="prefetch" href="/blog/assets/js/2.e43eae9e.js"><link rel="prefetch" href="/blog/assets/js/20.31748e58.js"><link rel="prefetch" href="/blog/assets/js/21.1ac5bc6a.js"><link rel="prefetch" href="/blog/assets/js/22.add56f7f.js"><link rel="prefetch" href="/blog/assets/js/23.f514ddc2.js"><link rel="prefetch" href="/blog/assets/js/25.fee81f10.js"><link rel="prefetch" href="/blog/assets/js/26.17d2df1b.js"><link rel="prefetch" href="/blog/assets/js/27.6aa66ff1.js"><link rel="prefetch" href="/blog/assets/js/28.8365c65b.js"><link rel="prefetch" href="/blog/assets/js/29.7dd4efec.js"><link rel="prefetch" href="/blog/assets/js/30.fa5b1d9f.js"><link rel="prefetch" href="/blog/assets/js/31.e285b959.js"><link rel="prefetch" href="/blog/assets/js/32.8f88049e.js"><link rel="prefetch" href="/blog/assets/js/33.43dff4b2.js"><link rel="prefetch" href="/blog/assets/js/34.aabca9dd.js"><link rel="prefetch" href="/blog/assets/js/35.764530b0.js"><link rel="prefetch" href="/blog/assets/js/37.83cee446.js"><link rel="prefetch" href="/blog/assets/js/38.eca5a428.js"><link rel="prefetch" href="/blog/assets/js/39.4a3b0403.js"><link rel="prefetch" href="/blog/assets/js/40.8e40faab.js"><link rel="prefetch" href="/blog/assets/js/41.967edd16.js"><link rel="prefetch" href="/blog/assets/js/43.fc9fe0c5.js"><link rel="prefetch" href="/blog/assets/js/44.96fe214b.js"><link rel="prefetch" href="/blog/assets/js/45.8153f499.js"><link rel="prefetch" href="/blog/assets/js/46.7216671f.js"><link rel="prefetch" href="/blog/assets/js/47.d93512ba.js"><link rel="prefetch" href="/blog/assets/js/48.ed8c7cb7.js"><link rel="prefetch" href="/blog/assets/js/49.79749131.js"><link rel="prefetch" href="/blog/assets/js/5.9df2b1be.js"><link rel="prefetch" href="/blog/assets/js/51.ccaa86bd.js"><link rel="prefetch" href="/blog/assets/js/52.7bc7e4b0.js"><link rel="prefetch" href="/blog/assets/js/53.5edb6d56.js"><link rel="prefetch" href="/blog/assets/js/54.21704a08.js"><link rel="prefetch" href="/blog/assets/js/55.2ef00cd0.js"><link rel="prefetch" href="/blog/assets/js/56.5b4b3494.js"><link rel="prefetch" href="/blog/assets/js/6.783a386a.js"><link rel="prefetch" href="/blog/assets/js/7.11c15d64.js"><link rel="prefetch" href="/blog/assets/js/8.91ec4c70.js"><link rel="prefetch" href="/blog/assets/js/9.c57dad7b.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.2fe28ca4.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6556d3aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="ZZIC ZZIC" class="logo"> <span class="site-name can-hide">ZZIC ZZIC</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/three/" class="nav-link router-link-active">
  Three
</a></div><div class="nav-item"><a href="/blog/book/" class="nav-link">
  Book
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/three/" class="nav-link router-link-active">
  Three
</a></div><div class="nav-item"><a href="/blog/book/" class="nav-link">
  Book
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/three/" aria-current="page" class="sidebar-link">Guide</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>3d-graphics</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/three/3d-graphics/chap-01/" class="sidebar-link">Three.js Scene 만들기</a></li><li><a href="/blog/three/3d-graphics/chap-02/" aria-current="page" class="active sidebar-link">Three.js 장면 구성 요소</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/three/3d-graphics/chap-02/#장면-scene-의-기본-기능" class="sidebar-link">장면(Scene)의 기본 기능</a></li><li class="sidebar-sub-header"><a href="/blog/three/3d-graphics/chap-02/#지오메트리-geometry-와-메시-mesh" class="sidebar-link">지오메트리(Geometry)와 메시(Mesh)</a></li></ul></li><li><a href="/blog/three/3d-graphics/chap-03/" class="sidebar-link">Three.js 의 다양한 광원 (Light)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webgl</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="three-js-장면의-기본-구성요소"><a href="#three-js-장면의-기본-구성요소" class="header-anchor">#</a> Three js 장면의 기본 구성요소</h1> <p><strong>이번 포스팅에서는 three.js 의 기본 구성요소에 대해 알아보겠습니다.<br>
장면을 생성하고 객체를 장면에 추가해봅시다.</strong></p> <ul><li>Three.js 장면에서 사용되는 구성요소들</li> <li>THREE.Scene 객체로 할 수 있는 것</li> <li>Geometry 와 Mesh 의 연관성</li></ul> <h2 id="장면-scene-의-기본-기능"><a href="#장면-scene-의-기본-기능" class="header-anchor">#</a> 장면(Scene)의 기본 기능</h2> <p>장면에 기본 구성 요소들 (카메라, 조명, 객체) 를 추가하겠습니다.</p> <ul><li>카메라(Camera): 화면에 어떤 것이 렌더링될 것인지 결정합니다.</li> <li>조명(Lights): 그림자 효과를 만들 때 물질이 어떻게 보일지 효과를 줍니다.</li> <li>객체(Objects): 정육면체, 구체 등 카메라 관점에서 표현되는 메인 객체입니다.</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>THREE.Scene 은 종종 <strong>Scene graph</strong> 라고도 불립니다.
장면 그래프는 그래픽 장면에 필요한 모든 정보를 담을 수 있는 구조체입니다.
Scene 이 객체와 조명, 그리고 렌더링에 필요한 다른 모든 객체를 포함할 수 있고, 장면 그래프트는 트리 구조 노드들의 집합으로 구성됩니다.
심지어, THREE.Scene 자체에 추가할 수 있는 각각의 객체는 THREE.Object3D 라는 기반 객체에서 확장되었으며, THREE.Obejct3D 객체는 자식도 가질 수 있습니다.</p></div> <p>먼저 기본 구성요소를 추가합니다.</p> <details class="custom-block details"><summary>소스코드를 보려면 클릭하세요!</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Scene 추가</span>
<span class="token keyword">let</span> scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Camera 추가</span>
<span class="token keyword">let</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Renderer 추가</span>
<span class="token keyword">let</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0x001633</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Plane 추가</span>
<span class="token keyword">var</span> planeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> planeMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffffff</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> plane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>planeGeometry<span class="token punctuation">,</span> planeMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
plane<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

plane<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
plane<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
plane<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span> 
plane<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>plane<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// Lights 추가</span>
<span class="token keyword">var</span> ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> spotLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
spotLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
spotLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>spotLight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <p>그리고 컨트롤 패널을 이용해 정육면체를 추가/마지막으로 추가된 정육면체를 삭제하는 기능을 구현하겠습니다.
컨트롤 패널은 dat.gui 를 이용할건데, 이 라이브러리는 cdn, npm, script import 등 다양한 방법으로 추가하시면 됩니다.</p> <details class="custom-block details"><summary>소스코드를 보려면 클릭하세요!</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>rotationSpeed <span class="token operator">=</span> <span class="token number">0.02</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>numberOfObjects <span class="token operator">=</span> scene<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">removeCube</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> allChildren <span class="token operator">=</span> scene<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
    <span class="token keyword">var</span> lastObject <span class="token operator">=</span> allChildren<span class="token punctuation">[</span>allChildren<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 만약 THREE.Mesh 객체이면 삭제한다.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastObject <span class="token keyword">instanceof</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        scene<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>lastObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberOfObjects <span class="token operator">=</span> scene<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">addCube</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cubeSize <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> cubeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span>cubeSize<span class="token punctuation">,</span> cubeSize<span class="token punctuation">,</span> cubeSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> cubeMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>cubeGeometry<span class="token punctuation">,</span> cubeMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cube<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    cube<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;cube-&quot;</span> <span class="token operator">+</span> scene<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    cube<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">30</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cube<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cube<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Plane 안의 랜덤 위치, 랜덤 색상의 객체를 추가한다.</span>
    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cube<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>numberOfObjects <span class="token operator">=</span> scene<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">outputObjects</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> gui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">dat<span class="token punctuation">.</span>GUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>controls<span class="token punctuation">,</span> <span class="token string">'rotationSpeed'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>controls<span class="token punctuation">,</span> <span class="token string">'addCube'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>controls<span class="token punctuation">,</span> <span class="token string">'removeCube'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>controls<span class="token punctuation">,</span> <span class="token string">'outputObjects'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>controls<span class="token punctuation">,</span> <span class="token string">'numberOfObjects'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">render_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  stats<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  scene<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>name <span class="token operator">!=</span> <span class="token string">'plane'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">+=</span> controls<span class="token punctuation">.</span>rotationSpeed<span class="token punctuation">;</span>
      e<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> controls<span class="token punctuation">.</span>rotationSpeed<span class="token punctuation">;</span>
      e<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">+=</span> controls<span class="token punctuation">.</span>rotationSpeed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>render_<span class="token punctuation">)</span><span class="token punctuation">;</span>

  renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">render_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <p>여기서 장면 기본 함수는 아래와 같습니다.</p> <ul><li><strong>THREE.Scene.Add</strong>: Scene에 객체를 추가한다.</li> <li><strong>THREE.Scene.Remove</strong>: Scene에서 객체를 삭제한다.</li> <li><strong>THREE.Scene.children</strong>: Scene에 있는 모든 자식들의 목록을 가져온다.</li> <li><strong>THREE.Scene.getObjectByName</strong>: 이름으로 특정한 객체를 찾는다.</li> <li><strong>THREE.Scene.traverse()</strong>: Scene의 모든 객체를 순회한다.</li></ul> <p>그럼, 아래 예제에서 우측 상단의 컨트롤 패널을 이용해 다양한 상호작용을 수행할 수 있습니다. (AddCube를 눌러보세요.)</p> <div class="example"><div id="dom_chap02_ex01" style="width:100%; height:100%; position: relative;"></div></div> <h3 id="overridematerial-속성-사용"><a href="#overridematerial-속성-사용" class="header-anchor">#</a> overrideMaterial 속성 사용</h3> <p>overrideMaterial 속성을 사용하면 장면의 모든 객체는 overrideMaterial 속성에 설정된 Material 을 사용하고, 객체 자신에 설정된 물질은 무시합니다.</p> <div class="language-js extra-class"><pre class="language-js"><code>scene<span class="token punctuation">.</span>overrideMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffffff</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="지오메트리-geometry-와-메시-mesh"><a href="#지오메트리-geometry-와-메시-mesh" class="header-anchor">#</a> 지오메트리(Geometry)와 메시(Mesh)</h2> <p>객체를 생성할때 Geometry와 Material, Mesh가 사용되었습니다. 예를 들어, Scene에 구체를 추가할 때 다음처럼 했습니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> sphereGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sphereMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x7777ff</span><span class="token punctuation">,</span> <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sphere <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>sphereGeometry<span class="token punctuation">,</span> sphereMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Geometry는 객체의 형상을 정의하고, Material은 객체가 어떻게 보이는지를 정의합니다.
Mesh는 이 둘을 조합하여 장면에 추가하였습니다.</p> <h3 id="지오메트리의-속성과-함수"><a href="#지오메트리의-속성과-함수" class="header-anchor">#</a> 지오메트리의 속성과 함수</h3> <p>Three.js는 방대한 Geometry를 제공합니다.
물질을 추가하고, 메시를 생성하는 것만으로 작업이 거의 끝납니다.
이에 대한 추가적인 설명은 5, 6장에서 할 것입니다.
이번에는 지오메트리가 도대체 무엇인지 먼저 살펴보겠습니다.</p> <p>지오메트리는 기본적으로 3D 라이브러리에서 3D 공간에서의 점들과 이 점을 연결하는 면들의 집합을 말합니다. 예를 들어</p> <ul><li>정육면체는 8개의 모서리를 갖습니다. 각각의 모서리는 x,y,z 축으로 정의될 수 있으며, 따라서 정육면체는 3D 공간에서 8개의 꼭지점을 갖습니다.</li> <li>정육면체는 각 모서리에 꼭지점에 있는 6개의 면으로 구성됩니다. Three.js에서 면은 항상 삼각형(세 꼭지점)으로 구성되므로, 정육면체의 경 우 각 면은 두 개의 삼각형으로 구성됩니다.</li></ul> <p>Three.js가 제공하는 지오메트리를 사용할 경우 꼭지점과 면들을 정의할 필요가 없습니다. 정육면체의 경우 너비와 높이, 깊이만 지정하면 됩니다. 이 정보를 이용해 Three.js 는 12개(6*2)의 면, 8개의 꼭지점을 가지는 지오메트리를 생성합니다. 일반적으로 Three.js가 제공하는 지오메트리를 사용해 자동으로 만들겠지만, 꼭지점과 면을 사용해 수동으로 지오메트리를 생성하는 것도 가능합니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 정점 배열</span>
<span class="token keyword">let</span> vertices <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 면 배열</span>
<span class="token keyword">let</span> faces <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
geometry<span class="token punctuation">.</span><span class="token function">setFromPoints</span><span class="token punctuation">(</span>vertices<span class="token punctuation">)</span><span class="token punctuation">;</span>
geometry<span class="token punctuation">.</span><span class="token function">setIndex</span><span class="token punctuation">(</span>faces<span class="token punctuation">)</span><span class="token punctuation">;</span>
geometry<span class="token punctuation">.</span><span class="token function">computeVertexNormals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x44ff44</span><span class="token punctuation">,</span> <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> materials<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> meshWireframe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> materials<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>meshWireframe<span class="token punctuation">)</span><span class="token punctuation">;</span>
meshWireframe<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="example" data-v-16fcbb8e><div id="dom_chap02_ex04" style="width:100%; height:100%" data-v-16fcbb8e></div></div> <p>위 코드는 간단한 정육면체를 만드는 방법을 보여줍니다.
vertices 배열을 통해 정육면체를 만드는 점들을 정의하고, 이 점들이 모여서 삼각형 면을 만들고 face 배열에 저장됩니다.
예를 들어, face 배열의 0,2,1 은 vertices 배열의 0, 2, 1의 점을 이용해 삼각형 면을 만듭니다.
전방을 향하는 면은 시계방향, 후방을 향하는 면은 반시계방향으로 꼭지점들을 배열하면 됩니다.</p> <p>꼭지점과 면을 이용하면 새로운 THREE.BufferGeometry 인스턴스를 생성할 수 있습니다.
그리고 computeVertexNormals를 호출하면 Three.js 는 각 면에 대한 normal 벡터(법선벡터)를 결정합니다.
이 정보를 통해 다양한 조명에 따른 장면에서의 면의 색상을 결정할 수 있습니다.</p> <p>또한, 컨트롤 패널에 아래 요소를 설정할 수 있도록 했습니다.</p> <ul><li>정육면체의 각 꼭지점 위치 (vertice 0~7)</li> <li>정육면체의 위치 (position)</li> <li>정육면체의 회전 (rotation)</li></ul> <details class="custom-block details"><summary>소스코드를 보려면 클릭하세요!</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> gui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>vertices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> verticesFolder <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'vertices'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> vertice <span class="token operator">=</span> vertices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    verticesFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>vertice<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updateMesh</span><span class="token punctuation">(</span>mesh<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    verticesFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>vertice<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updateMesh</span><span class="token punctuation">(</span>mesh<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    verticesFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>vertice<span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updateMesh</span><span class="token punctuation">(</span>mesh<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    verticesFolder<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> positionFolder <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'position'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
positionFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
positionFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
positionFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
positionFolder<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rotationFolder <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'rotation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rotationFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rotationFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rotationFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rotationFolder<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">updateMesh</span><span class="token punctuation">(</span><span class="token parameter">mesh<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> child <span class="token keyword">of</span> mesh<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> positionAttribute <span class="token operator">=</span> child<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> <span class="token string">'position'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        positionAttribute<span class="token punctuation">.</span><span class="token function">setXYZ</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> vertices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> vertices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> vertices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//child.geometry.setFromPoints(vertices);</span>
        positionAttribute<span class="token punctuation">.</span>needsUpdate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    threeLayer<span class="token punctuation">.</span><span class="token function">renderFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p>위 예제처럼 position 속성을 직접 설정할 수도 있지만, translate 함수를 사용하면 상대적으로 객체의 이동할 위치를 정의할 수 있습니다.</p> <table><thead><tr><th>함수/속성</th> <th>설명</th></tr></thead> <tbody><tr><td>position</td> <td>이 속성은 객체의 위치를 부모의 위치에 상대적인 위치로 결정했다. 대부분의 객체의 부모는 THREE.Scene 혹은 THREE.Object3D 객체다.</td></tr> <tr><td>rotation</td> <td>이 속성으로는 객체의 회전을 설정할 수 있다. 또한, 각 축별로 회전을 설정할 수 있는 rotateX(), rotateY(), rotateZ() 함수도 있다.</td></tr> <tr><td>translateX(amount)</td> <td>이 속성은 객체를 x축으로 amount 만큼 이동한다.</td></tr> <tr><td>translateY(amount)</td> <td>이 속성은 객체를 y축으로 amount 만큼 이동한다.</td></tr> <tr><td>translateZ(amount)</td> <td>이 속성은 객체를 z축으로 amount 만큼 이동한다.</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Source: Learn Three.js - By Jos Dirksen</p></div> <br> <div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/three/3d-graphics/chap-01/" class="prev">
        Three.js Scene 만들기
      </a></span> <span class="next"><a href="/blog/three/3d-graphics/chap-03/">
        Three.js 의 다양한 광원 (Light)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.c8d2d506.js" defer></script><script src="/blog/assets/js/4.80e5586c.js" defer></script><script src="/blog/assets/js/3.4f0179f1.js" defer></script><script src="/blog/assets/js/50.619225f8.js" defer></script><script src="/blog/assets/js/24.d6f88625.js" defer></script><script src="/blog/assets/js/36.d787fa02.js" defer></script><script src="/blog/assets/js/42.1feea272.js" defer></script>
  </body>
</html>
